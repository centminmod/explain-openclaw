> [Back to Post-Merge Hardening Index](../post-merge-hardening.md) | [Legitimate Gaps](../post-merge-hardening.md#legitimate-gaps-status)

## Feb 16 sync 8 (21 commits)

**Merge commit:** ab000bc41 | **Range:** be56a516f..ab000bc41

### Summary

This batch consists primarily of test infrastructure refactoring (17 commits) plus two gateway boot session management improvements and two chore commits (dependency update, CI caching). No security-relevant changes to production security controls.

### Commits

#### Security-Relevant Commits (2)

| SHA | Message | Files | Notes |
|-----|---------|-------|-------|
| fe73878df | fix(gateway): preserve session mapping across gateway restarts | 2 (1 test + 1 prod) | Reuses existing session ID for boot messages to prevent orphaning |
| b562aa662 | fix(gateway): keep boot sessions ephemeral without remapping main | 2 (1 test + 1 prod) | Snapshot/restore pattern for main session mapping during boot |

Both commits touch `src/gateway/boot.ts`, which is not referenced in existing documentation. The changes improve session lifecycle management for gateway boot messages but do not modify security controls referenced in the audit findings.

#### Non-Security Commits (19)

The 19 remaining commits are 17 test infrastructure refactors and 2 chore commits (dependency update + CI caching):

| SHA | Message | Files |
|-----|---------|-------|
| c07036e81 | chore: Update deps. | 2 (0 test + 2 config: package.json, pnpm-lock.yaml) |
| f0e373b82 | refactor(test): simplify state dir env restore | 2 (test files) |
| abd009b09 | refactor(test): dedupe openresponses server setup | 1 (test) |
| d27a763ee | refactor(test): reuse env helper in temp home harness | 1 (test) |
| f809ff5e5 | refactor(test): reuse env snapshot helper | 3 (test + harness) |
| 961ca61b0 | refactor(test): dedupe onboard auth env cleanup | 2 (test) |
| e9c8540e2 | refactor(test): simplify model auth env restore | 1 (test) |
| 94e84e6f7 | refactor(test): clean up gateway tool env restore | 1 (test) |
| a90e007d5 | refactor(test): reuse env snapshot in gateway ws harness | 1 (test) |
| 7bb0b7d1f | refactor(test): simplify config io env snapshot | 1 (test) |
| 07dea4c6c | refactor(test): dedupe auth choice env cleanup | 1 (test) |
| ee2fa5f41 | refactor(test): reuse env snapshots in unit suites | 4 (test) |
| e075a33ca | refactor(test): simplify oauth/profile env restore | 2 (test) |
| 997b9ad23 | refactor(test): dedupe provider api key env restore | 2 (test) |
| 4bdb857ec | chore: Use proper pnpm caching in one CI step. | 1 (0 test + 1 CI: .github/workflows) |
| cedd520f2 | refactor(test): simplify state dir env helpers | 3 (test + harness) |
| 7857096d2 | refactor(test): reuse env snapshot in model scan | 1 (test) |
| e3a93d670 | refactor(test): dedupe safe-bins mocks | 1 (test) |
| ab000bc41 | refactor(test): dedupe qianfan env restore | 1 (test) |

### Audit Cross-Reference

**Unaffected Claims:** None of the 16 audit claims or 3 legitimate gaps are affected by commits in this batch.

The gateway boot session changes improve internal session handling but do not modify any security controls cited in the audits (RBAC, env var filtering, path validation, token handling, etc.).

### Line Number Changes

None. The three referenced test files that changed (`src/agents/models-config.providers.nvidia.test.ts`, `src/config/io.write-config.test.ts`, `src/web/media.test.ts`) do not have line number citations in the documentation.

**Gap status:** [see Legitimate Gaps Status](../post-merge-hardening.md#legitimate-gaps-status).
