> [Back to Post-Merge Hardening Index](../post-merge-hardening.md) | [Legitimate Gaps](../post-merge-hardening.md#legitimate-gaps-status)

## Feb 19 sync 6 (29 commits, 0 security)

**Merge commit:** 89a0b95af | **Range:** d968e64f2..89a0b95af

### Summary

This batch consists entirely of refactors and test consolidations with no security hardening. The only security-touched commit (`89a0b95af`) is a code deduplication that extracts shared allowlist normalization logic without changing security behavior.

### Security-Relevant Commits

| SHA | Message | Files | Security Impact |
|-----|---------|-------|-----------------|
| `89a0b95af` | refactor(security): reuse shared allowlist normalization | 2 prod | Uses shared `normalizeStringEntries()` in `doctor-security.ts` and `audit-channel.ts`. Code dedup only — no behavior change. |

### Non-Security Commits

| SHA | Message | Files | Reason |
|-----|---------|-------|--------|
| `54e9924fc` | refactor(agents): dedupe subagent inline text extraction | 1 prod | Safe path refactor |
| `3267f0926` | refactor(node-host): extract invoke result helpers | 1 prod | Safe path refactor |
| `a37660581` | refactor(infra): dedupe APNs send context setup | 1 prod | APNs refactor |
| `aa8f87a3b` | refactor(plugins): reuse plugin loader logger adapter | 6 prod | Safe path refactor |
| `a8ebe942a` | refactor(cli): share camera clip file writer | 3 prod + 1 test | Media utility refactor |
| `002f158da` | test: merge empty-id sanitize mode checks | 1 test | Test consolidation |
| `595246b58` | test: merge context-window overflow variants | 1 test | Test consolidation |
| `cea586ba5` | test: merge skills-cli json output cases | 1 test | Test consolidation |
| `5d9517767` | refactor(config): share media provider request fields | 1 prod | Safe path refactor |
| `3f621d13f` | refactor(cli): dedupe browser debug and download opts | 2 prod | Safe path refactor |
| `0048af4e2` | refactor(commands): dedupe auth-choice model notes | 4 prod | String dedup in provider notes |
| `4e62bdf78` | refactor(signal): reuse shared reaction types | 1 prod | Safe path refactor |
| `136bd59ba` | refactor(shared): centralize @/# slug normalization | 3 prod + 1 test | Safe path refactor |
| `b36627903` | refactor(shared): reuse node list parsers across cli and tools | 3 prod + 1 test | Safe path refactor |
| `3b7c8fe79` | refactor(cli): extract shared node media helpers | 4 prod + 1 test | Safe path refactor |
| `e368e74a9` | test: dedupe validate-turns identity cases | 1 test | Test consolidation |
| `65ef7fb4a` | test: dedupe empty-input mmr assertions | 1 test | Test consolidation |
| `317441d09` | test: reuse chat-not-found assertion helper | 1 test | Test consolidation |
| `281e9110c` | test: table-drive format-time timestamp assertions | 1 test | Test consolidation |
| `20849df70` | test: merge media invalid-path scenarios | 1 test | Test consolidation |
| `6f3a6013e` | test: table-drive poll duration clamp cases | 1 test | Test consolidation |
| `5e7e63250` | test: merge base64 oversize guard variants | 1 test | Test consolidation |
| `d743332d8` | test: table-drive mime mapping assertions | 1 test | Test consolidation |
| `de826a62f` | test: merge telegram reaction scenarios | 1 test | Test consolidation |
| `03241498f` | test: table-drive telegram thread param cases | 1 test | Test consolidation |
| `c25a18493` | test: merge direct announce origin variants | 1 test | Test consolidation |
| `1a030a544` | test: table-drive sandbox formatter assertions | 1 test | Test consolidation |
| `c8e02329c` | test: dedupe subagent announce fallback and thread assertions | 1 test | Test consolidation |

### Line Number Shifts

| File | Old | New | Context |
|------|-----|-----|---------|
| `src/commands/doctor-security.ts` | :11 | :12 | `noteSecurityWarnings()` +1 line from import |
| `src/commands/doctor-security.ts` | :128 | :131 | `formatCliCommand` usage shifted from allowlist refactor |
| `src/config/types.tools.ts` | :167 | :184 | `tools.exec.security` shifted from earlier additions |
| `src/config/types.tools.ts` | :401-402 | :435 | `userAgent` shifted from earlier additions |
| `src/config/types.tools.ts` | :458-472 | :490-502 | `sessions.visibility` shifted from earlier additions |
| `src/agents/tools/nodes-tool.ts` | :344-347 | :349-350 | `outPath` handling shifted from camera clip refactor |
| `src/node-host/invoke.ts` | :499-512 | :522-532 | Consistency validation shifted from helper extraction |

### Audit Cross-Reference

**Unaffected Claims:** All 16 audit claims and 3 legitimate gaps remain unchanged. This batch has no security hardening.

**Gap status:** All 3 legitimate gaps remain open — see [Legitimate Gaps Status](../post-merge-hardening.md#legitimate-gaps-status).
